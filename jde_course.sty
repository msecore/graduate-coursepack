%jde_course is based off of jmr_style

%Document class conditionals:
\newif\ifpset  %---> For problem sets (not utilized)
\newif\ifquiz  %---> For quizzes sets (not utilized)
\newif\ifexam  %---> For exams sets (utilized)
\newif\iflab   %---> For labs (not utilized)
\newif\ifqbank %---> For question banks (utilized)

%Font families and such
\usepackage{ulem}
\usepackage{xltxtra}
\usepackage{lmodern}

%Section formating.
\usepackage{sectsty}
  \sectionfont{\mdseries\sffamily\HUGE \NUBrand}
	\sectionfont{\color{RichBlack10}}
  \subsectionfont{\Large \NUBrandTwoLight}
	\subsectionfont{\color{NUpurp120}}
	\subsubsectionfont{\mdseries\normalsize \NUBrandTwo}
	\subsubsectionfont{\color{NUpurp120}}
	\paragraphfont{\mdseries\normalsize\bfseries}

\makeatletter
	\def\@seccntformat#1{\@ifundefined{#1@cntformat}%
	{\csname the#1\endcsname\quad}%  default
	{\csname #1@cntformat\endcsname}% individual control
	}
	\def\section@cntformat{\thesection\quad}
	\def\subsection@cntformat{\thesubsection\quad}
\makeatother

\makeatletter
	\def\@seccntformat#1{\protect\makebox[0pt][r]{\csname
	the#1\endcsname\quad}}
\makeatother

%\usepackage{tocloft}
	%\renewcommand{\cftsecfont}{\mdseries \sffamily \Large \NUBrand}
	%\renewcommand{\cftsubsecfont}{\mdseries \sffamily \large \NUBrandTwo}
  %\long\def\symbolfootnote[#1]#2{\begingroup%
  %\def\thefootnote{\fnsymbol{footnote}}\footnote[#1]{#2}\endgroup}

%Date and time
\usepackage{datetime}
\usepackage{datenumber}
\usepackage{textcomp}
\usepackage{fontspec}
\usepackage{grffile}
\usepackage[labelfont=sc]{caption}
\usepackage{etoolbox}
\usepackage{datatool, tabularx}

% define colors
\usepackage{xcolor}
	%NU Primary Palette
	\definecolor{NUpurp}{HTML}{4E2A84}
	\definecolor{NUpurp10}{HTML}{EEEBF7}
	\definecolor{NUpurp30}{HTML}{ADA2CF}
	\definecolor{NUpurp60}{HTML}{6450A1}
	\definecolor{NUpurp120}{HTML}{401F68}
	\definecolor{RichBlack10}{HTML}{F0F0F0}
	\definecolor{RichBlack20}{HTML}{D1D3D4}
	\definecolor{RichBlack50}{HTML}{492F92}
	\definecolor{RichBlack80}{HTML}{6D6E71}
	%NU Secondary Palette: Brights
	\definecolor{BGreen}{HTML}{64A70B}
	\definecolor{BAqua}{HTML}{6DCDB8}
	\definecolor{BBlue}{HTML}{418FDE}
	\definecolor{BYellow}{HTML}{E1E000}
	\definecolor{BOrange}{HTML}{FFB500}
	\definecolor{BRed}{HTML}{E1523D}
	%NU Secondary Palette: Darks
	\definecolor{DGreen}{HTML}{007A53}
	\definecolor{DAqua}{HTML}{007396}
	\definecolor{DBlue}{HTML}{00205B}
	\definecolor{DYellow}{HTML}{C5A900}
	\definecolor{DOrange}{HTML}{C67D30}
	\definecolor{DRed}{HTML}{B94700}
	%Rondinelli color pallette
	\definecolor{myred}{RGB}{204,25,25}
	\definecolor{myblue}{RGB}{0,102,221}
	\definecolor{mygrey}{rgb}{0.09411,0.28235,0.70196}
  \definecolor{mygreen}{RGB}{0,204,155}
%
\usepackage{soul}
\usepackage{ragged2e}
\usepackage{parskip}
%\usepackage[
%  breaklinks,             %
%  bookmarks = false, %
%  %pdfborder     = {},  %
%  pdfpagemode   = UseNone,%
%  pdfstartview 	= FitH,		%
%  pdfstartpage  = 1,      %
%  colorlinks    = true,   %
%]{hyperref}
%\hypersetup{
%    colorlinks,
%    linkcolor=BRed,
%    citecolor=DBlue,
%    urlcolor=DBlue}

% setup margins
\usepackage[letterpaper,tmargin=1.0in,bmargin=1.0in,lmargin=1.0in,rmargin=1.0in]{geometry}

%Eedefine item symbol
\renewcommand{\labelitemi}{$\diamond$}

%Maths, lists and units
\usepackage{fix-cm}
\usepackage{vwcol}
\usepackage{enumerate}
\usepackage{xfrac}
\usepackage{mathrsfs}
	\DeclareFontFamily{U}{rsfs}{\skewchar\font127}
	\DeclareFontShape{U}{rsfs}{m}{n}{%
   <-6> rsfs5
   <6-8> rsfs7
   <8-> rsfs10
}{}
\usepackage{amsmath,mathtools}
\usepackage[version=4]{mhchem} %Maybe use chemformula package?
\usepackage{amssymb}
\usepackage{arydshln}
\usepackage{cancel}
\usepackage{upgreek}
\usepackage{pbox}
\usepackage{needspace}
\usepackage[]{units}
\usepackage[warnings-off={mathtools-colon, mathtools-overbracket}]{unicode-math}
\usepackage{adforn}           %helps with some symbollic rendering
	\newcommand*\rfrac[2]{{}^{#1}\!/_{#2}}    %in-line fraction
	%\newcommand*\diff{\mathop{}\!\mathrm{d}}	%partial differential
	\newcommand*\Diff[2]{\mathop{}\!\mathrm{d^{#1}}{#2}}	%differential #1:Order, #2:Variable
	\newcommand*\FullDiff[3]{\mathop{}\!\frac{\mathrm{d}^{#1}{#2}}{\mathrm{d}{#3}^{#1}}} %#1:Order, #2:Function, #3:Variable
	\newcommand*\Partial[3]{\mathop{}\!\frac{\partial^{#1}{#2}}{\partial{#3}^{#1}}} %#1:Order, #2:Function, #3:Variable
	\DeclareMathOperator\erf{(erf)}				%erf
	\DeclareMathOperator\erfc{(erfc)}			%erf
	%\def\hbar{{\mathchar'26\mkern-12mu h}}
	%\def\dbar{{\mathchar'26\mkern-12mu \text{d}}}

	\mathchardef\mhyphen="2D
	\newcommand{\ignore}[1]{}
	\newcommand{\otoprule}{\midrule[\heavyrulewidth]}
	\newcommand*\Eval[3]{\left.#1\right\rvert_{#2}^{#3}}

%Figures
\usepackage{adjustbox}        %helps with graphics positioning
\usepackage{pdfpages}         %allows insertion of pdf pages
\usepackage{float}            %helps with graphics positioning
\usepackage{wrapfig}
\usepackage{multirow}         %helps with table organization
\usepackage{multicol}         %helps with table organization
\usepackage{graphicx}
\usepackage{array}
\usepackage{booktabs}         % nicer tables
\usepackage{marginnote}
	\reversemarginpar
\usepackage{setspace} 	% set singlespacing bib
\usepackage{mdwlist}	% enable enumerate* environment -single space lists
\usepackage{sidecap}	% enable side captions
\usepackage{graphicx}
\usepackage{verbatimbox} %code output
\usepackage{rotating} % rotate table

% captions
%\usepackage{ccaption}
\usepackage{ragged2e}
%% Change format of captions
  %\captionnamefont{\bfseries \footnotesize \sffamily}
  %\captiontitlefont{\footnotesize \sffamily}
  %\captiondelim{: }
% \captionstyle{\justifying}
% \onlinecite command
\makeatletter
	\DeclareRobustCommand\onlinecite{\@onlinecite}
	\def\@onlinecite#1{\begingroup\let\@cite\NAT@citenum\citealp{#1}\endgroup}
\makeatother
%

%Footnotes are now symbols rather than numerals
\renewcommand{\thefootnote}{\fnsymbol{footnote}}

%Color boxes
\newcommand\crule[3][black]{\textcolor{#1}{\rule{#2}{#3}}}

% Clean up reference style
\usepackage[square, numbers, sort&compress]{natbib}
\bibliographystyle{abbrvnat}
%
\setlength\parindent{0pt}%
\setlength{\bibsep}{0pt}%6pt} % Change bib spacing, requires natbib package
\setlength{\columnsep}{10pt} % change wrapfig horizontal padding
\clubpenalty = 10000
\widowpenalty = 10000

%Table Colors
\usepackage{tabularx}
\usepackage{booktabs}

%Exam class stuff:
\newcommand{\tf}[1][{}]{				% spacing for for t/f questions
	\fillin[#1][0.5in]}%          % this could be changed to create boxes.

%Level 1 Point Allocation
\newcommand{\PointAllocationLevelOne}[1][{}]{
	\ifpset
		\question[]
	\fi
	\ifquiz
		\question[#1]
	\fi
	\ifexam
		\part[#1]
	\fi
	\iflab
		\question[]
	\fi
	\ifqbank
		\question[#1]
	\fi
}

%Level 2 Point Allocation
\newcommand{\PointAllocationLevelTwo}[1]{
	\ifpset
		\part[]
	\fi
	\ifquiz
		\part[#1]
	\fi
	\ifexam
		\subpart[#1]
	\fi
	\iflab
		\part[]
	\fi
	\ifqbank
		\part[#1]
	\fi
}

%Level 3 Point Allocation
\newcommand{\PointAllocationLevelThree}[1]{
	\ifpset
		\subpart[]
	\fi
	\ifquiz
		\subpart[#1]
	\fi
	\ifexam
		\subsubpart[#1]
	\fi
	\iflab
		\subpart[]
	\fi
	\ifqbank
		\subpart[#1]
	\fi
}

%Add outcomes environment in exam class:
%--------------------------------------------------------------------
\newcommand{\printoutcomes}{\printoutcomestrue}
\newcommand{\noprintoutcomes}{\printoutcomesfalse}

\newif\ifprintoutcomes
\printoutcomesfalse

\newenvironment{outcomes}
{%
  \ifprintoutcomes
    \printanswerstrue % will be cancelled by the end of the environment
    \renewcommand{\solutiontitle}{\noindent\textbf{Outcomes:}\enspace}%
    \begin{solution}%
  \else
    \setbox 0\vbox\bgroup
  \fi
}
{%
  \ifprintoutcomes
    \end{solution}
  \else
    \egroup
  \fi
}
%--------------------------------------------------------------------

%Add rubric environment in exam class:
%--------------------------------------------------------------------
\newcommand{\printrubric}{\printrubrictrue}
\newcommand{\noprintrubric}{\printrubricfalse}

\newif\ifprintrubric
\printrubricfalse

\newenvironment{rubric}
{%
  \ifprintrubric
    \printanswerstrue % will be cancelled by the end of the environment
    \renewcommand{\solutiontitle}{\noindent\textbf{\color{NUpurp}{Grading Rubric:}}\enspace}%
    \begin{solution}%
			\color{NUpurp}
  \else
    \setbox 0\vbox\bgroup
  \fi
}
{%
  \ifprintrubric
    \end{solution}
  \else
    \egroup
  \fi
}
%--------------------------------------------------------------------


%Add comments/extensions environment in exam class:
%--------------------------------------------------------------------
\newcommand{\printcomments}{\printcommentstrue}
\newcommand{\noprintcomments}{\printcommentsfalse}

\newif\ifprintcomments
\printcommentsfalse

\newenvironment{comments}
{%
  \ifprintcomments
    \printanswerstrue % will be cancelled by the end of the environment
    \renewcommand{\solutiontitle}{\noindent\textbf{\color{orange}{Comments/Extensions:}}\enspace}%
    \begin{solution}%
			\color{orange}
  \else
    \setbox 0\vbox\bgroup
  \fi
}
{%
  \ifprintcomments
    \end{solution}
  \else
    \egroup
  \fi
}
%--------------------------------------------------------------------


%Add print file ID environment in exam class:
%--------------------------------------------------------------------
\newcommand{\printID}{\printIDtrue}
\newcommand{\noprintID}{\printIDfalse}

\newif\ifprintID
\printIDfalse

\newenvironment{FileID}
{%
  \ifprintID
    \printanswerstrue % will be cancelled by the end of the environment
    \renewcommand{\solutiontitle}{\noindent\textbf{File Information:}\enspace}%
    \begin{solution}%
  \else
    \setbox 0\vbox\bgroup
  \fi
}
{%
  \ifprintID
    \end{solution}
  \else
    \egroup
  \fi
}


%Add Laboratory TA guide environment in exam class:
%--------------------------------------------------------------------
\newcommand{\printlabguide}{\printlabguidetrue}
\newcommand{\noprintlabguide}{\printlabguidefalse}

\newif\ifprintlabguide
\printlabguidefalse

\newenvironment{LabGuide}
{%
  \ifprintlabguide
    \printanswerstrue % will be cancelled by the end of the environment
    \renewcommand{\solutiontitle}{\noindent\textbf{\color{blue}{Instructor Guide:}}\enspace}%
    \begin{solution}%
			\color{blue}
  \else
    \setbox 0\vbox\bgroup
  \fi
}
{%
  \ifprintlabguide
    \end{solution}
  \else
    \egroup
  \fi
}

%Add student guide environment in exam class:
%--------------------------------------------------------------------
\newcommand{\printstudentguide}{\printstudentguidetrue}
\newcommand{\noprintstudentguide}{\printstudentguidefalse}

\newif\ifprintstudentguide
\printstudentguidefalse

\newenvironment{StudentGuide}
{%
  \ifprintstudentguide
    \printanswerstrue % will be cancelled by the end of the environment
    \renewcommand{\solutiontitle}{\noindent\textbf{\color{blue}{Student Guide:}}\enspace}%
    \begin{solution}%
			\color{blue}
  \else
    \setbox 0\vbox\bgroup
  \fi
}
{%
  \ifprintstudentguide
    \end{solution}
  \else
    \egroup
  \fi
}

%Dummy environment for conditionals.
\newenvironment*{ifenviron}{}{}
\newenvironment*{questionenviron}{}{}

\newbool{studentstate}
\newcommand{\SetStudentState}
{\ifprintoutcomes
	\setbool{studentstate}{false}
\else
	\ifprintanswers
		\setbool{studentstate}{false}
	\else
		\ifprintrubric
			\setbool{studentstate}{false}
		\else
			\ifprintcomments
				\setbool{studentstate}{false}
			\else
				\ifprintlabguide
					\setbool{studentstate}{false}
				\else
					\ifprintID
						\setbool{studentstate}{false}
					\else
						\setbool{studentstate}{true}
					\fi
				\fi%
			\fi%
		\fi%
	\fi%
\fi%
}
